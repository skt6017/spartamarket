{% extends "base.html" %}

{% block content %}

<h1>Products</h1>
<a href="{% url 'products:product_create' %}">
    <button>작성하기</button>
</a>
<form action="{% url 'products:search' %}" method="POST" class="d-flex" role="search">
    {% csrf_token %}
    <input class="form-control me-2" type="search" placeholder="Search" name="searched" aria-label="Search">
    <button class="btn btn-outline-success" type="submit">Search</button>
</form>
<hr>
{% for product in products %}
    <form action="{% url 'products:detail' product.pk %}" method="POST">
        {% csrf_token %}
        <a href="{% url 'products:detail' product.pk %}">[ {{ product.pk }} ] {{ product.title }}</a>
    </form>
    <a href="">
        <p> 작성자: {{ product.author }}
        </a>
    <form action="{% url 'products:like' product.pk %}" method="POST">
        {% csrf_token %}
        {% if request.user in product.like_users.all %}
        <button class="btn btn-link text-danger">
            <i class="fa-solid fa-heart"></i>
        </button>
        {% else %}
        <button class="btn btn-link text-danger">
            <i class="fa-regular fa-heart"></i>
        </button>
        {% endif %}
    </form>
    <hr>
{% endfor %}

{% endblock content %}


